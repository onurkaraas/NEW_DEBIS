{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport createDataContext from \"./createDataContext\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nvar cheerio = require(\"react-native-cheerio\");\n\nvar request = require(\"superagent\");\n\nvar superagent = request.agent();\n\nvar authReducer = function authReducer(state, action) {\n  switch (action.type) {\n    case \"add_error\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: action.payload\n      });\n\n    case \"signin\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.payload\n      });\n\n    case \"signout\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar signIn = function signIn(dispatch, callback) {\n  return function _callee(_ref) {\n    var username, password, get, dashboard;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            username = _ref.username, password = _ref.password;\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(superagent.get(\"https://debis.deu.edu.tr/debis.php\").unset(\"User-Agent\"));\n\n          case 4:\n            get = _context.sent;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(superagent.post(\"https://debis.deu.edu.tr/debis.php\").unset(\"User-Agent\").send({\n              username: \"\" + username,\n              password: \"\" + password,\n              emailHost: \"ogr.deu.edu.tr\",\n              tamam: \"Gonder\"\n            }).set(\"Content-Type\", \"application/x-www-form-urlencoded\").end(function (err, res) {\n              if (err) {\n                console.log(err);\n              }\n\n              var resultScreenData = res.text;\n              var $ = cheerio.load(resultScreenData);\n              var studentName = $(\"body > div > div\").text().slice(11);\n              console.log(studentName);\n            }));\n\n          case 7:\n            dashboard = _context.sent;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"token\", \"qwe\"));\n\n          case 10:\n            dispatch({\n              type: \"signin\",\n              payload: \"qwe\"\n            });\n            _context.next = 17;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](1);\n            console.log(\"giris hata\");\n            dispatch({\n              type: \"add_error\",\n              payload: \"signing err\"\n            });\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 13]], Promise);\n  };\n};\n\nvar signOut = function signOut(dispatch, callback) {\n  return function _callee2() {\n    var out;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(superagent.get(\"https://debis.deu.edu.tr/php_library/Cikis.php\").unset(\"User-Agent\"));\n\n          case 3:\n            out = _context2.sent;\n            _context2.next = 10;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(\"giris hata\");\n            dispatch({\n              type: \"add_error\",\n              payload: \"signout err\"\n            });\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(authReducer, {\n  signIn: signIn,\n  signOut: signOut\n}, {\n  token: null,\n  errorMessage: \"xzc\"\n}),\n    Provider = _createDataContext.Provider,\n    Context = _createDataContext.Context;\n\nexport { Provider, Context };","map":{"version":3,"sources":["C:/Users/onurk/Desktop/NEW_DEBIS/context/AuthContext.js"],"names":["createDataContext","AsyncStorage","cheerio","require","request","superagent","agent","authReducer","state","action","type","errorMessage","payload","token","signIn","dispatch","callback","username","password","get","unset","post","send","emailHost","tamam","set","end","err","res","console","log","resultScreenData","text","$","load","studentName","slice","dashboard","setItem","signOut","out","Provider","Context"],"mappings":"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","sourcesContent":["import createDataContext from \"./createDataContext\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nconst cheerio = require(\"react-native-cheerio\");\nconst request = require(\"superagent\");\nconst superagent = request.agent();\n//\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case \"add_error\":\n      return {\n        ...state,\n        errorMessage: action.payload,\n      };\n    case \"signin\":\n      return { ...state, token: action.payload };\n    case \"signout\":\n      return { ...state, token: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst signIn =\n  (dispatch, callback) =>\n  async ({ username, password }) => {\n    try {\n      let get = await superagent\n        .get(\"https://debis.deu.edu.tr/debis.php\")\n        .unset(\"User-Agent\");\n      const dashboard = await superagent\n        .post(\"https://debis.deu.edu.tr/debis.php\")\n        .unset(\"User-Agent\")\n        .send({\n          username: `${username}`,\n          password: `${password}`,\n          emailHost: \"ogr.deu.edu.tr\",\n          tamam: \"Gonder\",\n        })\n        .set(\"Content-Type\", \"application/x-www-form-urlencoded\")\n        .end((err, res) => {\n          if (err) {\n            console.log(err);\n          }\n          const resultScreenData = res.text;\n          const $ = cheerio.load(resultScreenData);\n          const studentName = $(\"body > div > div\").text().slice(11);\n          console.log(studentName);\n        });\n\n      await AsyncStorage.setItem(\"token\", `qwe`);\n\n      dispatch({\n        type: \"signin\",\n        payload: `qwe`,\n      });\n    } catch (e) {\n      console.log(\"giris hata\");\n      dispatch({\n        type: \"add_error\",\n        payload: \"signing err\",\n      });\n    }\n  };\n\nconst signOut = (dispatch, callback) => {\n  return async () => {\n    try {\n      const out = await superagent\n        .get(\"https://debis.deu.edu.tr/php_library/Cikis.php\")\n        .unset(\"User-Agent\");\n    } catch (e) {\n      console.log(\"giris hata\");\n\n      dispatch({\n        type: \"add_error\",\n        payload: \"signout err\",\n      });\n    }\n  };\n};\nexport const { Provider, Context } = createDataContext(\n  authReducer,\n  { signIn, signOut },\n  { token: null, errorMessage: \"xzc\" }\n);\n"]},"metadata":{},"sourceType":"module"}