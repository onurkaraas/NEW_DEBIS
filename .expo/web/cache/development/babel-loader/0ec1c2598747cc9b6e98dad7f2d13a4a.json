{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport createDataContext from \"./createDataContext\";\n\nvar cheerio = require(\"react-native-cheerio\");\n\nvar superagent = require(\"superagent\").agent();\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nvar authReducer = function authReducer(state, action) {\n  switch (action.type) {\n    case \"add_error\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        errorMessage: action.payload\n      });\n\n    case \"signin\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.payload\n      });\n\n    case \"sm_error\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar signIn = function signIn(dispatch) {\n  return function _callee(_ref, callback) {\n    var username, password, dashboard, resultScreenData, $, studentName;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            username = _ref.username, password = _ref.password;\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(superagent.post(\"https://debis.deu.edu.tr/debis.php\").send({\n              username: \"\" + username,\n              password: \"\" + password,\n              emailHost: \"ogr.deu.edu.tr\",\n              tamam: \"Gonder\"\n            }).set(\"Content-Type\", \"application/x-www-form-urlencoded\"));\n\n          case 4:\n            dashboard = _context.sent;\n            resultScreenData = dashboard.text;\n            $ = cheerio.load(resultScreenData);\n            studentName = $(\"body > div > div\").text().slice(11);\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"token\", studentName));\n\n          case 10:\n            dispatch({\n              type: \"signin\",\n              payload: studentName\n            });\n            console.log(studentName);\n            _context.next = 17;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](1);\n            dispatch({\n              type: \"add_error\",\n              payload: \"signing err\"\n            });\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 14]], Promise);\n  };\n};\n\nvar signOut = function signOut(dispatch) {\n  return function _callee2() {\n    var out;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(superagent.get(\"https://debis.deu.edu.tr/php_library/Cikis.php\"));\n\n          case 3:\n            out = _context2.sent;\n            _context2.next = 9;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            dispatch({\n              type: \"add_error\",\n              payload: \"signout err\"\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n};\n\nvar lessons = function lessons(dispatch) {\n  return function _callee3() {\n    var resultScreen, resultScreenData, $, semesterSelect, semestersObj, i, item, title, value, sortedKeys, first;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(superagent.get(\"https://debis.deu.edu.tr/OgrenciIsleri/Ogrenci/OgrenciNotu/index.php\").set(\"Content-Type\", \"application/x-www-form-urlencoded\"));\n\n          case 3:\n            resultScreen = _context3.sent;\n            resultScreenData = resultScreen.text;\n            $ = cheerio.load(resultScreenData);\n            semesterSelect = $(\"select[id='ogretim_donemi_id'] > option\");\n            semestersObj = [];\n            i = 1;\n\n          case 9:\n            if (!(i < semesterSelect.length)) {\n              _context3.next = 23;\n              break;\n            }\n\n            _context3.next = 12;\n            return _regeneratorRuntime.awrap(semesterSelect.eq(i));\n\n          case 12:\n            item = _context3.sent;\n            _context3.next = 15;\n            return _regeneratorRuntime.awrap(item.text());\n\n          case 15:\n            title = _context3.sent;\n            _context3.next = 18;\n            return _regeneratorRuntime.awrap(item.attr(\"value\"));\n\n          case 18:\n            value = _context3.sent;\n            semestersObj.push({\n              value: value,\n              title: title\n            });\n\n          case 20:\n            i++;\n            _context3.next = 9;\n            break;\n\n          case 23:\n            sortedKeys = Object.keys(semestersObj).sort();\n            first = semestersObj[sortedKeys[1]];\n            return _context3.abrupt(\"return\", first[\"title\"]);\n\n          case 28:\n            _context3.prev = 28;\n            _context3.t0 = _context3[\"catch\"](0);\n            dispatch({\n              type: \"add_error\",\n              payload: \"signout err\"\n            });\n\n          case 31:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 28]], Promise);\n  };\n};\n\nvar semsters = function semsters(dispatch) {\n  return function _callee4(id) {\n    var pickSemester, pickSemesterData, $, classValue, lessonsObj, i, item, lessonCode, title, value;\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(superagent.post(\"https://debis.deu.edu.tr/OgrenciIsleri/Ogrenci/OgrenciNotu/index.php\").send({\n              ogretim_donemi_id: \"\" + id\n            }).set(\"Content-Type\", \"application/x-www-form-urlencoded\"));\n\n          case 3:\n            pickSemester = _context4.sent;\n            pickSemesterData = pickSemester.text;\n            $ = cheerio.load(pickSemesterData);\n            classValue = $(\"select[id='ders'] > option\");\n            lessonsObj = [];\n\n            for (i = 1; i < classValue.length; i++) {\n              item = classValue.eq(i);\n              lessonCode = item.text().slice(0, 8).trim();\n              title = item.text().slice(8).trim();\n              value = item.attr(\"value\");\n              lessonsObj.push(value);\n            }\n\n            console.log(lessonsObj);\n            _context4.next = 15;\n            break;\n\n          case 12:\n            _context4.prev = 12;\n            _context4.t0 = _context4[\"catch\"](0);\n            dispatch({\n              type: \"sm_error\",\n              payload: \"s err\"\n            });\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  };\n};\n\nvar _createDataContext = createDataContext(authReducer, {\n  signIn: signIn,\n  signOut: signOut,\n  lessons: lessons,\n  semsters: semsters\n}, {\n  token: null,\n  errorMessage: \"\"\n}),\n    Provider = _createDataContext.Provider,\n    Context = _createDataContext.Context;\n\nexport { Provider, Context };","map":{"version":3,"sources":["C:/Users/onurk/Desktop/NEW_DEBIS/screens/AuthContext.js"],"names":["createDataContext","cheerio","require","superagent","agent","AsyncStorage","authReducer","state","action","type","errorMessage","payload","token","signIn","dispatch","callback","username","password","post","send","emailHost","tamam","set","dashboard","resultScreenData","text","$","load","studentName","slice","setItem","console","log","signOut","get","out","lessons","resultScreen","semesterSelect","semestersObj","i","length","eq","item","title","attr","value","push","sortedKeys","Object","keys","sort","first","semsters","id","ogretim_donemi_id","pickSemester","pickSemesterData","classValue","lessonsObj","lessonCode","trim","Provider","Context"],"mappings":"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","sourcesContent":["import createDataContext from \"./createDataContext\";\nconst cheerio = require(\"react-native-cheerio\");\nconst superagent = require(\"superagent\").agent();\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case \"add_error\":\n      return { ...state, errorMessage: action.payload };\n    case \"signin\":\n      return { ...state, token: action.payload };\n    case \"sm_error\":\n      return { ...state, token: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst signIn =\n  (dispatch) =>\n  async ({ username, password }, callback) => {\n    try {\n      const dashboard = await superagent\n        .post(\"https://debis.deu.edu.tr/debis.php\")\n        .send({\n          username: `${username}`,\n          password: `${password}`,\n          emailHost: \"ogr.deu.edu.tr\",\n          tamam: \"Gonder\",\n        })\n        .set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      const resultScreenData = dashboard.text;\n      const $ = cheerio.load(resultScreenData);\n      const studentName = $(\"body > div > div\").text().slice(11);\n      await AsyncStorage.setItem(\"token\", studentName);\n      dispatch({ type: \"signin\", payload: studentName });\n      console.log(studentName);\n    } catch (e) {\n      dispatch({ type: \"add_error\", payload: \"signing err\" });\n    }\n  };\n\nconst signOut = (dispatch) => {\n  return async () => {\n    try {\n      const out = await superagent.get(\n        \"https://debis.deu.edu.tr/php_library/Cikis.php\"\n      );\n    } catch (e) {\n      dispatch({ type: \"add_error\", payload: \"signout err\" });\n    }\n  };\n};\n\nconst lessons = (dispatch) => {\n  return async () => {\n    try {\n      const resultScreen = await superagent\n        .get(\n          \"https://debis.deu.edu.tr/OgrenciIsleri/Ogrenci/OgrenciNotu/index.php\"\n        )\n        .set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      const resultScreenData = resultScreen.text;\n      const $ = cheerio.load(resultScreenData);\n      const semesterSelect = $(\"select[id='ogretim_donemi_id'] > option\");\n      let semestersObj = [];\n      for (let i = 1; i < semesterSelect.length; i++) {\n        let item = await semesterSelect.eq(i);\n        let title = await item.text();\n        let value = await item.attr(\"value\");\n        semestersObj.push({\n          value,\n          title,\n        });\n      }\n      const sortedKeys = Object.keys(semestersObj).sort();\n      const first = semestersObj[sortedKeys[1]];\n      return first[\"title\"];\n    } catch (e) {\n      dispatch({ type: \"add_error\", payload: \"signout err\" });\n    }\n  };\n};\n\nconst semsters = (dispatch) => {\n  return async (id) => {\n    try {\n      let pickSemester = await superagent\n        .post(\n          \"https://debis.deu.edu.tr/OgrenciIsleri/Ogrenci/OgrenciNotu/index.php\"\n        )\n        .send({\n          ogretim_donemi_id: `${id}`,\n        })\n        .set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n      const pickSemesterData = pickSemester.text;\n      const $ = cheerio.load(pickSemesterData);\n      const classValue = $(\"select[id='ders'] > option\");\n      let lessonsObj = [];\n      for (let i = 1; i < classValue.length; i++) {\n        let item = classValue.eq(i);\n        let lessonCode = item.text().slice(0, 8).trim();\n        let title = item.text().slice(8).trim();\n        let value = item.attr(\"value\");\n\n        lessonsObj.push(value);\n      }\n      console.log(lessonsObj);\n    } catch (e) {\n      dispatch({ type: \"sm_error\", payload: \"s err\" });\n    }\n  };\n};\n\nexport const { Provider, Context } = createDataContext(\n  authReducer,\n  { signIn, signOut, lessons, semsters },\n  { token: null, errorMessage: \"\" }\n);\n"]},"metadata":{},"sourceType":"module"}